var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard");Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf3=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));var React=_interopRequireWildcard(require("react"));var _reactNative=require("react-native");var _reactNativeReanimated=_interopRequireDefault(require("react-native-reanimated"));var _jsxFileName="/Users/satya/Workspace/Projects/react-native-tab-view/src/ScrollPager.tsx";var event=_reactNativeReanimated.default.event,divide=_reactNativeReanimated.default.divide,Value=_reactNativeReanimated.default.Value;var ScrollPager=function(_React$Component){(0,_inherits2.default)(ScrollPager,_React$Component);function ScrollPager(){var _getPrototypeOf2;var _this;(0,_classCallCheck2.default)(this,ScrollPager);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=(0,_possibleConstructorReturn2.default)(this,(_getPrototypeOf2=(0,_getPrototypeOf3.default)(ScrollPager)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.initialOffset={x:_this.props.navigationState.index*_this.props.layout.width,y:0};_this.interactionHandle=null;_this.scrollViewRef=React.createRef();_this.jumpTo=function(key){var _this$props=_this.props,navigationState=_this$props.navigationState,keyboardDismissMode=_this$props.keyboardDismissMode,onIndexChange=_this$props.onIndexChange;var index=navigationState.routes.findIndex(function(route){return route.key===key;});if(navigationState.index===index){_this.scrollTo(index*_this.props.layout.width);}else{onIndexChange(index);if(keyboardDismissMode==='auto'){_reactNative.Keyboard.dismiss();}}};_this.scrollTo=function(x){var animated=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;if(_this.scrollViewRef.current){_this.scrollViewRef.current.getNode().scrollTo({x:x,animated:animated});}};_this.enterListeners=[];_this.addListener=function(type,listener){switch(type){case'enter':_this.enterListeners.push(listener);break;}};_this.removeListener=function(type,listener){switch(type){case'enter':{var index=_this.enterListeners.indexOf(listener);if(index>-1){_this.enterListeners.splice(index,1);}break;}}};_this.position=new _reactNativeReanimated.default.Value(_this.props.navigationState.index*_this.props.layout.width);_this.onScroll=event([{nativeEvent:{contentOffset:{x:_this.position}}}]);_this.layoutWidthNode=new Value(_this.props.layout.width);_this.relativePosition=divide(_this.position,_this.layoutWidthNode);return _this;}(0,_createClass2.default)(ScrollPager,[{key:"componentDidMount",value:function componentDidMount(){if(this.props.layout.width){this.scrollTo(this.props.navigationState.index*this.props.layout.width,false);}}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){var offset=this.props.navigationState.index*this.props.layout.width;if(prevProps.navigationState.routes.length!==this.props.navigationState.routes.length||prevProps.layout.width!==this.props.layout.width){this.scrollTo(offset,false);}else if(prevProps.navigationState.index!==this.props.navigationState.index){this.scrollTo(offset);}if(prevProps.layout.width!==this.props.layout.width){this.layoutWidthNode.setValue(this.props.layout.width);}}},{key:"componentWillUnmount",value:function componentWillUnmount(){if(this.interactionHandle!==null){_reactNative.InteractionManager.clearInteractionHandle(this.interactionHandle);}}},{key:"render",value:function render(){var _this2=this;var _this$props2=this.props,children=_this$props2.children,layout=_this$props2.layout,onSwipeStart=_this$props2.onSwipeStart,onSwipeEnd=_this$props2.onSwipeEnd,overscroll=_this$props2.overscroll,navigationState=_this$props2.navigationState;var handleSwipeStart=function handleSwipeStart(){onSwipeStart==null?void 0:onSwipeStart();_this2.interactionHandle=_reactNative.InteractionManager.createInteractionHandle();};var handleSwipeEnd=function handleSwipeEnd(){onSwipeEnd==null?void 0:onSwipeEnd();if(_this2.interactionHandle!==null){_reactNative.InteractionManager.clearInteractionHandle(_this2.interactionHandle);}};return children({position:this.relativePosition,addListener:this.addListener,removeListener:this.removeListener,jumpTo:this.jumpTo,render:function render(children){return React.createElement(_reactNativeReanimated.default.ScrollView,{pagingEnabled:true,directionalLockEnabled:true,keyboardDismissMode:"on-drag",keyboardShouldPersistTaps:"always",overScrollMode:"never",scrollToOverflowEnabled:true,scrollEnabled:_this2.props.swipeEnabled,automaticallyAdjustContentInsets:false,bounces:overscroll,scrollsToTop:false,showsHorizontalScrollIndicator:false,scrollEventThrottle:1,onScroll:_this2.onScroll,onScrollBeginDrag:handleSwipeStart,onScrollEndDrag:handleSwipeEnd,onMomentumScrollEnd:_this2.onScroll,contentOffset:_this2.initialOffset,style:styles.container,contentContainerStyle:layout.width?{flexDirection:'row',width:layout.width*navigationState.routes.length,flex:1}:null,ref:_this2.scrollViewRef,__source:{fileName:_jsxFileName,lineNumber:160}},children);}});}}]);return ScrollPager;}(React.Component);exports.default=ScrollPager;ScrollPager.defaultProps={bounces:true};var styles=_reactNative.StyleSheet.create({container:{flex:1}});
//# sourceMappingURL=ScrollPager.js.map